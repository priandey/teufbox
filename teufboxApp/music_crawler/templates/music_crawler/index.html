{% load static %}
<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>TeufBox</title>
    <!-- Latest compiled and minified bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">    <!-- Optional bootstrap theme -->
    <link rel="stylesheet" type="text/css" href="{% static 'music_crawler/css/index.css' %}">
    <link rel="shortcut icon" type="image/png" href="{% static 'music_crawler/css/favicon.png' %}"/>
</head>
<body>
    <div class="container">
        <div class="row d-flex justify-content-left align-items-center">
            <h1 class="col-md-4" hidden>TeufBox</h1>
            <img src="{% static 'music_crawler/css/logo.png' %}" class="col-md-4"/>
            <div class="col-md-8 mediaPlayer">
                <div class="row">
                    <div id="musicPlayer">
                        <h2 class="col-md-12">Playing : <<< playlist.currentSong.song.title >>></h2>
                        <div class="col-md-12">
                            <input class="col-md-12" type="range" min="0" step="0.05" v-bind:max="controls.songDuration" v-bind:value="controls.currentTimePosition" />
                            <<< controls.currentTimePosition >>> s/ <<< controls.songDuration >>> s
                        </div>
                        <button v-on:click="previousSong">Prev.</button>
                        <button v-show="controls.playing" v-on:click="pauseSong">Pause</button>
                        <button v-show="controls.playing===false" v-on:click="playSong">Play !</button>
                        <button v-on:click="nextSong">Next</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mainArea">
            <div class="search-result col-md-8 order md-1 order-sm-2" id="SearchYoutube">
                <div class="row justify-content-center">
                    <form action="" method="get" class="col-md-12 justify-content-around" v-on:submit.prevent="getResult">
                        <input type="text" name="keywords" v-model="keywords" id="keywords" class="col-md-12" placeholder="Cherchez ici une musique, un artiste, un album..." autocomplete="off" autofocus/>
                    </form>
                        <div v-if="searching" class="col-md-4 align-self-center" style="margin-top: 40px">
                            <img src="{% static 'music_crawler/js/searching.gif' %}"/>
                        </div>
                        <div class="proposition col-md-12" v-for="result in resultList">
                            <div class="row">
                                <img v-bind:src="result.thumbnail" class="col-md-4 d-inline">
                                <div class="col-md-6">
                                    <p v-if="result.is_local" style="color:greenyellow"> <<< result.name >>></p>
                                    <p v-else class="col-md-12"><<< result.name >>> by <<< result.channel >>></p>
                                    <button class="buttonPrimary" v-on:click="addToCache(result)">Ajouter à la liste</button>
                                </div>
                            </div>
                        </div>
                </div>
            </div>
            <div class="downloadList col-md-4 order-md-2 order-sm-1" id="musicCache">
                <div class="row justify-content-center">
                    <h4 class="col-md-9 underlinedTitle">File d'attente</h4>
                    <button class="col-md-12 buttonPrimary" v-on:click="downloadAll">Tout télécharger</button>
                    <button class="col-md-12 buttonPrimary" v-on:click="emptyCache">Vider la file</button>
                </div>
                <div class="col-md-12 musicCached" v-for="(music, index) in musicList"> <!-- TODO : Faire un systeme de changemet d'ordre avec input pour débuter -->
                    <strong><input type="text" size="1" v-bind:placeholder="index"/> <<< music.title >>> </strong>
                    <p><button v-on:click="deleteItem(index)" class="buttonPrimary">Supprimer</button>
                        <button v-if="music.is_downloading === false && music.is_local===false" v-on:click="download(music)" class="buttonPrimary">Télécharger</button>
                        <img v-else-if="music.is_downloading && music.is_local===false" src="{% static 'music_crawler/js/progress-bar.gif' %}" />
                        <span v-else>Téléchargement effectué</span></p>
                    <p>Dans la teufbox  <i v-if="music.is_local" class="far fa-2x fa-check-circle" style="color:green"></i>
                                        <i v-else class="fas fa-2x fa-ban" style="color:red"></i><br>
                </div>
            </div>
        </div>

        <script src="https://kit.fontawesome.com/053139c009.js" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
        <script src="{% static 'music_crawler/js/download.js' %}"></script>
        <script src="{% static 'music_crawler/js/audio-player.js' %}"></script>
    </div>
</body>
</html>